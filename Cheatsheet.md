- Instalar AFL++:

Instalamos las dependencias:
```
sudo apt-get update
sudo apt-get install -y build-essential python3-dev automake git flex bison libglib2.0-dev libpixman-1-dev python3-setuptools
sudo apt-get install -y lld-11 llvm-11 llvm-11-dev clang-11 || sudo apt-get install -y lld llvm llvm-dev clang 
sudo apt-get install -y gcc-$(gcc --version|head -n1|sed 's/.* //'|sed 's/\..*//')-plugin-dev libstdc++-$(gcc --version|head -n1|sed 's/.* //'|sed 's/\..*//')-dev
```

Compilamos AFL++:

```
cd $HOME
git clone https://github.com/AFLplusplus/AFLplusplus && cd AFLplusplus
export LLVM_CONFIG="llvm-config-11"
make distrib
sudo make install
```

https://github.com/antonio-morales/Fuzzing101/tree/main/Exercise%201#install-afl 


---------------------------------------------------

- Creamos un directorio donde ejecutaremos todo:
```
cd $HOME
mkdir Fuzzing_LibRaw && cd Fuzzing_LibRaw
```

- Descargamos y descomprimimos
```
wget https://github.com/LibRaw/LibRaw/archive/refs/tags/0.19.0.tar.gz
tar -xzvf 0.19.0.tar.gz && cd LibRaw-0.19.0/
```

- Compilamos la libreria:
```
sudo apt install libtool
autoreconf --install
make clean
./configure --prefix="$HOME/Fuzzing_LibRaw/LibRaw-0.19.0/install"
make -j$(nproc)
make install
```

---------------------------------

- Ahora vamos a compilar con la instrumentación activa
```
rm -r install
make clean
CC=afl-clang-fast CXX=afl-clang-fast++ CFLAGS="-fsanitize=address -g" CXXFLAGS="-fsanitize=address -g" LDFLAGS="-fsanitize=address" ./configure --prefix="$HOME/Fuzzing_LibRaw/LibRaw-0.19.0/install"
make -j$(nproc)
make install
```

- Creamos el input corpus:
```
mkdir -p afl/afl_in && cd afl/afl_in
wget https://github.com/ianare/exif-samples/raw/master/tiff/Arbitro.tiff
cd ../..
```

- Ahora vamos a fuzzear:
```
afl-fuzz -i './afl/afl_in' -o './afl/afl_out' -D -- ./install/bin/raw-identify @@

afl-fuzz -i './afl/afl_in' -o './afl/afl_out' -s 123 -p explore -- ./install/bin/raw-identify @@
```

-------------------------

- Instalar Eclipse:

Lo podemos descargar desde el siguiente enlace:
https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/2021-03/R/eclipse-cpp-2021-03-R-linux-gtk-x86_64.tar.gz&mirror_id=1190

o con wget con:
```
wget http://eclipse.c3sl.ufpr.br/technology/epp/downloads/release/2021-03/R/eclipse-cpp-2021-03-R-linux-gtk-x86_64.tar.gz
```

Si JAVA-SDK no esta instalado en el sistema, lo podemos instalar con el siguiente comando:
```
sudo apt install default-jdk
```
  
Por ultimo podemos extraerlo con:
```
tar -xzvf eclipse-cpp-2021-03-R-linux-gtk-x86_64.tar.gz
```
También recomiendo instalar un editor hexadecimal como ghex:
```
sudo apt install ghex
```

--------------------------
GDB CheatSheet

- info frame

- print &var

- x/32x $sp

--------------------------

LibXML2:

````
cd $HOME
mkdir Fuzzing_libxml2 && cd Fuzzing_libxml2
````
````
wget http://xmlsoft.org/download/libxml2-2.9.4.tar.gz
tar xvf libxml2-2.9.4.tar.gz && cd libxml2-2.9.4/
````

````
sudo apt-get install python-dev
CFLAGS="-fsanitize=address" CXXFLAGS="-fsanitize=address" LDFLAGS="-fsanitize=address" ./configure --prefix="$HOME/Fuzzing_libxml2/libxml2-2.9.4/install" --disable-shared --without-debug --without-ftp --without-http --without-legacy --without-python LIBS='-ldl'
make -j$(nproc)
make install
````

```
wget https://raw.githubusercontent.com/antonio-morales/Fuzzing-Exploiting-challenges__Ekoparty2021/main/LibXML/fuzz.cpp
g++ -o fuzz fuzz.cpp -Iinclude -L.libs -lxml2 -lz -fsanitize=address
```
